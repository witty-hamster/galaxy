# 【数据结构】稀疏数组 Sparse Array

## 稀疏数组处理哪些问题？

- 当一个二维数组中，大部分元素为 0，或者为同一个值（作为二维数组的默认填充值）时，可以使用稀疏数组对原有的二维数组进行压缩处理。

## 稀疏数组处理手段

- 记录数组共有几行几列，有多少个有效的值
- 把有效值的元素的行列及值记录在一个小规模的数组中，从而起到缩小程序的规模

## 简单案例说明

### 1.  图解

![](http://witty-hamster.gitee.io/draw-bed/数据结构与算法/【数据结构】二维数组转为稀疏数组简单案例.png)

### 2.  稀疏数组分为两部分：

- 第一部分（上图绿色框中的内容）即稀疏数组的第一行，代表的是原始二维数组共有多少行、多少列，且排除默认值 0 以外有多少个有效值。
  -  举例说明：
    - 6：代表原始二维数组共有 6 行
    - 7：代表原始二维数组共有 7 列
    - 8：代表原始二维数组中有 8 个有效值
- 第二部分（上图橙色框中的内容），代表每一个有效值在原始二维数组中的哪一行、哪一列上。

### 3.  稀疏数组的固定格式：

> 由固定的三列 + 不固定的多行，构成动态数组

- 固定的三列分别是：（排除稀疏索引的第一行）

  1. 第一列：存储原始二维数组中有效值对应的行号

  2. 第二列：存储原始二维数组中有效值对应的列号

  3. 第三列：存储原始二维数组中具体的有效值

- 稀疏数组第一行的三列分别是：

  1. 第一列：存储原始二维数组共有多少行

  2. 第二列：存储原始二维数组共有多少列

  3. 第三列：存储原始二维数组共有多少个有效值

### 4.  如何计算出稀疏数组共有多少行？

- 看原始二维数组中有多少个有效值，有效值的个数 + 1 = 稀疏数组的行数

- 思考：为什么计算稀疏数组时，需要在有效值个数上 + 1？
  -  因为稀疏数组中，第一行为固定行，用来体现原始二维数组的行列信息及有效值信息。

## 【典型问题】五子棋问题

### 1. 需求

- 假设有如下一个 11 x 11 的五子棋棋盘，需要完成存盘退出、继续上一局的功能。

### 2. 需求分析

1. 棋盘相等于一个 11 x 11 的二维数组，每个棋子的位置，相当于二维数组中的行列信息。
2. 存盘功能（实现的是将当前这一局的数据存储到本地磁盘文件中）
3. 继续上一局（实现的是将本地磁盘文件中的数据，恢复到磁盘上）

> 这里可以用到【稀疏数组】，由于棋盘上没有下棋子的位置相当于默认为0值，对于这些无意义的值，存入本地磁盘只会浪费资源，且没有实际意义。因此，可以使用稀疏数组对二维数组进行压缩、解压功能。
>
> 1. 存盘：相当于将二维数组转换为稀疏数组【数组压缩操作】
> 2. 继续上一局：相当于将稀疏数组转换为二维数组【数据解压操作】

### 3. 处理方案

#### 3.1 图解

![](http://witty-hamster.gitee.io/draw-bed/数据结构与算法/【数据结构】稀疏数组处理五子棋问题.png)

#### 3.2 处理过程描述

- 存盘

  > 二维数组 转为 稀疏数组的处理思路

  1. 遍历 原始二维数组，得到有效数据的个数 sum
  2. 根据 有效数据个数 sum，可以创建一个稀疏数组 sparseArr。稀疏数组定义为 `int[sum+1][3]` ==> sum + 1 行、3列的稀疏数组
  3. 将二维数组的有效数据存储到 稀疏数组

- 读盘

  > 稀疏数组 转为 二维数组的处理思路

  1. 先读取稀疏数组的第一行，根据第一行的数据，创建原始的二维数组。
  2. 再读取稀疏数组后几行的数据，并赋值给原始的二维数组。



